"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[8712],{38712:(e,s,n)=>{n.r(s),n.d(s,{default:()=>O});var t=n(47313),a=n(85554),l=n(10499),o=n(25976),i=n(35323);const r=e=>e.settings,d=(0,i.P1)([r],(e=>e.settings)),c={selectInitLoading:(0,i.P1)([r],(e=>Boolean(e.initLoading))),selectSaveLoading:(0,i.P1)([r],(e=>Boolean(e.saveLoading))),selectSettings:d,selectRaw:r};var u=n(48704),g=n(27829),m=n(62563),h=n(75627);const f={theme:[{id:"default",hex:"#1890ff"},{id:"light",hex:"#f8f9fa"},{id:"cyan",hex:"#13c2c2"},{id:"geek-blue",hex:"#2f54eb"},{id:"gold",hex:"#faad14"},{id:"lime",hex:"#a0d911"},{id:"magenta",hex:"#eb2f96"},{id:"orange",hex:"#fa8c16"},{id:"polar-green",hex:"#52c41a"},{id:"purple",hex:"#722ed1"},{id:"red",hex:"#f5222d"},{id:"volcano",hex:"#fa541c"},{id:"yellow",hex:"#fadb14"}]};var x=n(89994),b=n(96111),p=n(95748),v=n(5544),j=n(68160),Z=n(21933),C=n(85543),y=n(46417);const N=Z.Ry().shape({theme:Z.Z_().transform(((e,s)=>""===s?null:e)).nullable().trim().label((0,l.ag)("settings.fields.theme")).required(),logos:x.Z.files((0,l.ag)("settings.fields.logos"),{max:1}),backgroundImages:x.Z.files((0,l.ag)("settings.fields.backgroundImages"),{max:1})});const k=function(e){const s=(0,a.I0)(),n=(0,a.v9)(c.selectSaveLoading),i=e.settings,[r]=(0,t.useState)((()=>({...i||{},theme:i&&i.theme||"default"}))),d=(0,h.cI)({resolver:(0,m.X)(N),mode:"all",defaultValues:r}),u=e=>{s(o.Z.doSave(e))};return(0,y.jsx)(j.Z,{children:(0,y.jsx)(h.RV,{...d,children:(0,y.jsxs)("form",{onSubmit:d.handleSubmit(u),children:[(0,y.jsxs)("div",{className:"row",children:[(0,y.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,y.jsx)(v.Z,{name:"theme",label:(0,l.ag)("settings.fields.theme"),options:f.theme.map((e=>({value:e.id,label:(0,l.ag)("settings.colors.".concat(e.id))}))),required:!0})}),(0,y.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,y.jsx)(C.Z,{name:"logos",label:(0,l.ag)("settings.fields.logos"),storage:b.Z.values.settingsLogos,max:1})}),(0,y.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,y.jsx)(C.Z,{name:"backgroundImages",label:(0,l.ag)("settings.fields.backgroundImages"),storage:b.Z.values.settingsBackgroundImages,max:1})})]}),(0,y.jsxs)("div",{className:"form-buttons",children:[(0,y.jsxs)("button",{className:"btn btn-primary",disabled:n,type:"button",onClick:d.handleSubmit(u),children:[(0,y.jsx)(p.Z,{loading:n,iconClass:"far fa-save"})," ",(0,l.ag)("common.save")]}),(0,y.jsxs)("button",{disabled:n,onClick:()=>{Object.keys(r).forEach((e=>{d.setValue(e,r[e])}))},className:"btn btn-light",type:"button",children:[(0,y.jsx)("i",{className:"fas fa-undo"})," ",(0,l.ag)("common.reset")]}),e.onCancel?(0,y.jsxs)("button",{disabled:n,onClick:()=>e.onCancel(),className:"btn btn-light",type:"button",children:[(0,y.jsx)("i",{className:"fas fa-times"})," ",(0,l.ag)("common.cancel")]}):null]})]})})})};var I=n(2135),S=n(23516),B=n(10419);const w=function(e){const s=(0,a.v9)(S.Z.selectPermissionToRead);return(0,y.jsx)(B.Z,{style:{marginBottom:"16px"},children:s&&(0,y.jsx)(I.rU,{to:"/audit-logs?entityNames=settings",children:(0,y.jsxs)("button",{className:"btn btn-light",type:"button",children:[(0,y.jsx)(p.Z,{iconClass:"fas fa-history"})," ",(0,l.ag)("auditLog.menu")]})})})};var P=n(53852),L=n(75352),V=n(61567);const O=e=>{const s=(0,a.I0)(),n=(0,a.v9)(c.selectInitLoading),i=(0,a.v9)(c.selectSettings);return(0,t.useEffect)((()=>{s(o.Z.doInit())}),[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(P.Z,{items:[[(0,l.ag)("dashboard.menu"),"/"],[(0,l.ag)("settings.title")]]}),(0,y.jsxs)(g.Z,{children:[(0,y.jsx)(L.Z,{children:(0,l.ag)("settings.title")}),(0,y.jsx)(w,{}),n&&(0,y.jsx)(V.Z,{}),!n&&i&&(0,y.jsx)(k,{settings:i,onCancel:()=>(0,u.s1)().push("/")})]})]})}},61567:(e,s,n)=>{n.d(s,{Z:()=>a});var t=n(46417);const a=function(){return(0,t.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,t.jsx)("div",{className:"spinner-border text-primary"})})}},5544:(e,s,n)=>{n.d(s,{Z:()=>c});var t=n(47313),a=n(75627),l=n(93605),o=n(10499),i=n(49384),r=n(46417);function d(e){const{label:s,name:n,hint:d,options:c,required:u,mode:g,placeholder:m,isClearable:h,externalErrorMessage:f}=e,{register:x,formState:{touchedFields:b,errors:p,isSubmitted:v},setValue:j,watch:Z}=(0,a.Gc)(),C=i.Z.errorMessage(n,p,b,v,f),y=Z(n);(0,t.useEffect)((()=>{x(n)}),[x,n]);const N=()=>y?y.map((e=>c.find((s=>s.value===e)))):[],k=()=>{const{options:s}=e;return null!=y?s.find((e=>e.value===y)):null},I=s=>{if(!s)return j(n,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));const t=s.map((e=>e?e.value:e)).filter((e=>null!=e));j(n,t,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t)},S=s=>{if(!s)return j(n,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));j(n,s.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(s.value)},B=Boolean(C)?{container:e=>({...e,color:"hsl(0,0%,20%)"}),control:e=>({...e,borderColor:"red"})}:{container:e=>({...e,color:"hsl(0,0%,20%)"})};return(0,r.jsxs)("div",{className:"form-group",children:[Boolean(s)&&(0,r.jsx)("label",{className:"col-form-label ".concat(u?"required":null),children:s}),(0,r.jsx)("br",{}),(0,r.jsx)(l.ZP,{className:"w-100",value:(()=>{const{mode:s}=e;return"multiple"===s?N():k()})(),onChange:s=>{const{mode:n}=e;return"multiple"===n?I(s):S(s)},onBlur:s=>{e.onBlur&&e.onBlur(s)},id:n,name:n,options:c,isMulti:"multiple"===g,placeholder:m||"",isClearable:h,styles:B,loadingMessage:()=>(0,o.ag)("autocomplete.loading"),noOptionsMessage:()=>(0,o.ag)("autocomplete.noOptions")}),(0,r.jsx)("div",{className:"invalid-feedback",children:C}),Boolean(d)&&(0,r.jsx)("small",{className:"form-text text-muted",children:d})]})}d.defaultProps={required:!1,isClearable:!0};const c=d},10419:(e,s,n)=>{n.d(s,{Z:()=>l});var t,a=n(30168);const l=n(20346).ZP.div(t||(t=(0,a.Z)(["\n  margin-bottom: 8px;\n\n  .btn {\n    margin-right: 8px;\n    margin-bottom: 8px;\n  }\n"])))},93605:(e,s,n)=>{n.d(s,{ZP:()=>i});var t=n(36228),a=n(87462),l=n(47313),o=n(4194),i=(n(5296),n(1168),n(5236),(0,l.forwardRef)((function(e,s){var n=(0,t.u)(e);return l.createElement(o.S,(0,a.Z)({ref:s},n))})))},87462:(e,s,n)=>{function t(){return t=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},t.apply(this,arguments)}n.d(s,{Z:()=>t})}}]);