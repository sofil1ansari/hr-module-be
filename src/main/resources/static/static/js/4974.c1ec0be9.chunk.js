"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[4974],{63442:(e,s,l)=>{l.d(s,{Z:()=>t});var a=l(17366);const t={status:["active","invited","empty-permissions"],roles:Object.keys(a.Z.values)}},15021:(e,s,l)=>{l.d(s,{Z:()=>d});var a=l(35323),t=l(86495),n=l(26319),o=l(71945);const r=(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],((e,s)=>new n.Z(e,s).match(o.Z.values.userRead))),c=(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],((e,s)=>new n.Z(e,s).match(o.Z.values.userEdit))),i=(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],((e,s)=>new n.Z(e,s).match(o.Z.values.userDestroy))),d={selectPermissionToRead:r,selectPermissionToEdit:c,selectPermissionToCreate:(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],((e,s)=>new n.Z(e,s).match(o.Z.values.userCreate))),selectPermissionToImport:(0,a.P1)([t.Z.selectCurrentTenant,t.Z.selectCurrentUser],((e,s)=>new n.Z(e,s).match(o.Z.values.userImport))),selectPermissionToDestroy:i}},5544:(e,s,l)=>{l.d(s,{Z:()=>d});var a=l(47313),t=l(75627),n=l(93605),o=l(10499),r=l(49384),c=l(46417);function i(e){const{label:s,name:l,hint:i,options:d,required:u,mode:m,placeholder:h,isClearable:x,externalErrorMessage:b}=e,{register:j,formState:{touchedFields:g,errors:Z,isSubmitted:f},setValue:p,watch:v}=(0,t.Gc)(),N=r.Z.errorMessage(l,Z,g,f,b),C=v(l);(0,a.useEffect)((()=>{j(l)}),[j,l]);const y=()=>C?C.map((e=>d.find((s=>s.value===e)))):[],k=()=>{const{options:s}=e;return null!=C?s.find((e=>e.value===C)):null},w=s=>{if(!s)return p(l,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));const a=s.map((e=>e?e.value:e)).filter((e=>null!=e));p(l,a,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(a)},S=s=>{if(!s)return p(l,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));p(l,s.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(s.value)},T=Boolean(N)?{container:e=>({...e,color:"hsl(0,0%,20%)"}),control:e=>({...e,borderColor:"red"})}:{container:e=>({...e,color:"hsl(0,0%,20%)"})};return(0,c.jsxs)("div",{className:"form-group",children:[Boolean(s)&&(0,c.jsx)("label",{className:"col-form-label ".concat(u?"required":null),children:s}),(0,c.jsx)("br",{}),(0,c.jsx)(n.ZP,{className:"w-100",value:(()=>{const{mode:s}=e;return"multiple"===s?y():k()})(),onChange:s=>{const{mode:l}=e;return"multiple"===l?w(s):S(s)},onBlur:s=>{e.onBlur&&e.onBlur(s)},id:l,name:l,options:d,isMulti:"multiple"===m,placeholder:h||"",isClearable:x,styles:T,loadingMessage:()=>(0,o.ag)("autocomplete.loading"),noOptionsMessage:()=>(0,o.ag)("autocomplete.noOptions")}),(0,c.jsx)("div",{className:"invalid-feedback",children:N}),Boolean(i)&&(0,c.jsx)("small",{className:"form-text text-muted",children:i})]})}i.defaultProps={required:!1,isClearable:!0};const d=i},44587:(e,s,l)=>{l.d(s,{Z:()=>o});var a=l(64214),t=l(47313),n=l(46417);const o=e=>{const s=(0,t.useRef)(),[l,o]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(s.current){const e=new a.u_(s.current);e.show(),o(e)}}),[]);const r=()=>{if(l){l.hide();new a.u_(s.current).hide(),e.onClose()}};return(0,n.jsx)("div",{ref:s,className:"modal",tabIndex:-1,children:(0,n.jsx)("div",{className:"modal-dialog modal-sm",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",children:e.title}),(0,n.jsx)("button",{type:"button",className:"close",onClick:r,"data-dismiss":"modal",children:(0,n.jsx)("span",{children:"\xd7"})})]}),(0,n.jsxs)("div",{className:"modal-footer",children:[(0,n.jsx)("button",{type:"button",className:"btn btn-light btn-sm","data-dismiss":"modal",onClick:r,children:e.cancelText}),(0,n.jsx)("button",{type:"button",onClick:()=>(window.$(s.current).modal("hide"),e.onConfirm()),className:"btn btn-primary btn-sm",children:e.okText})]})]})})})}},74974:(e,s,l)=>{l.r(s),l.d(s,{default:()=>_});var a=l(10499),t=l(27829),n=l(53852),o=l(75352),r=l(62563),c=l(47313),i=l(75627),d=l(85554),u=l(40846),m=l(47590),h=l(36172),x=l(23377),b=l(63442),j=l(95748),g=l(13586),Z=l(47575),f=l(5544),p=l(69138),v=l(21933),N=l(46417);const C=v.Ry().shape({fullName:m.Z.string((0,a.ag)("user.fields.fullName")),email:m.Z.email((0,a.ag)("user.fields.email")),role:m.Z.enumerator((0,a.ag)("user.fields.role")),status:m.Z.enumerator((0,a.ag)("user.fields.status"))}),y={fullName:null,email:null,role:null,status:null},k={fullName:{label:(0,a.ag)("user.fields.fullName"),render:u.Z.generic()},email:{label:(0,a.ag)("user.fields.email"),render:u.Z.generic()},role:{label:(0,a.ag)("user.fields.role"),render:e=>e?(0,a.ag)("roles.".concat(e,".label")):null},status:{label:(0,a.ag)("user.fields.status"),render:u.Z.enumerator("user.status")}};const w=function(e){const s=(0,d.v9)(x.Z.selectRawFilter),l=(0,d.I0)(),[t,n]=(0,c.useState)(!1),[o]=(0,c.useState)((()=>({...y,...s}))),u=(0,i.cI)({resolver:(0,r.X)(C),defaultValues:o,mode:"all"});(0,c.useEffect)((()=>{l(h.Z.doFetch(C.cast(o),s))}),[l]);const m=e=>{const s=u.getValues();l(h.Z.doFetch(e,s)),n(!1)},{loading:v}=e;return(0,N.jsxs)(p.Z,{children:[(0,N.jsx)(g.Z,{onClick:()=>{n(!t)},renders:k,values:s,expanded:t,onRemove:e=>(u.setValue(e,y[e]),u.handleSubmit(m)())}),(0,N.jsx)("div",{className:"container",children:(0,N.jsx)("div",{className:"collapse ".concat(t?"show":""),children:(0,N.jsx)(i.RV,{...u,children:(0,N.jsxs)("form",{onSubmit:u.handleSubmit(m),children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-lg-6 col-12",children:(0,N.jsx)(Z.Z,{name:"email",label:(0,a.ag)("user.fields.email")})}),(0,N.jsx)("div",{className:"col-lg-6 col-12",children:(0,N.jsx)(Z.Z,{name:"fullName",label:(0,a.ag)("user.fields.fullName")})}),(0,N.jsx)("div",{className:"col-lg-6 col-12",children:(0,N.jsx)(f.Z,{name:"status",label:(0,a.ag)("user.fields.status"),options:b.Z.status.map((e=>({value:e,label:(0,a.ag)("user.status.".concat(e))})))})}),(0,N.jsx)("div",{className:"col-lg-6 col-12",children:(0,N.jsx)(f.Z,{name:"role",label:(0,a.ag)("user.fields.role"),options:b.Z.roles.map((e=>({value:e,label:(0,a.ag)("roles.".concat(e,".label"))})))})})]}),(0,N.jsx)("div",{className:"row",children:(0,N.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,N.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:v,children:[(0,N.jsx)(j.Z,{loading:v,iconClass:"fas fa-search"})," ",(0,a.ag)("common.search")]}),(0,N.jsxs)("button",{className:"btn btn-light",type:"button",onClick:()=>{Object.keys(y).forEach((e=>{u.setValue(e,y[e])})),l(h.Z.doReset()),n(!1)},disabled:v,children:[(0,N.jsx)(j.Z,{loading:v,iconClass:"fas fa-undo"})," ",(0,a.ag)("common.reset")]})]})})]})})})})]})};var S=l(2135),T=l(15021),P=l(17366),R=l(31807),D=l(44587),E=l(61567),U=l(27216),V=l(97249),I=l(98848),F=l(93488);const B=function(){const e=(0,d.I0)(),[s,l]=(0,c.useState)(null),t=(0,d.v9)(x.Z.selectLoading),n=(0,d.v9)(x.Z.selectRows),o=(0,d.v9)(x.Z.selectPagination),r=(0,d.v9)(x.Z.selectSelectedKeys),i=(0,d.v9)(x.Z.selectHasRows),u=(0,d.v9)(x.Z.selectSorter),m=(0,d.v9)(x.Z.selectIsAllSelected),b=(0,d.v9)(T.Z.selectPermissionToEdit),j=(0,d.v9)(T.Z.selectPermissionToDestroy),g=s=>{const l=u.field===s&&"ascend"===u.order?"descend":"ascend";e(h.Z.doChangeSort({field:s,order:l}))};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(U.Z,{children:[(0,N.jsx)("div",{className:"table-responsive",children:(0,N.jsxs)("table",{className:"table table-striped     2",children:[(0,N.jsx)("thead",{className:"thead",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)(I.Z,{className:"th-checkbox",children:i&&(0,N.jsxs)("div",{className:"custom-control custom-checkbox",children:[(0,N.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"table-header-checkbox",checked:Boolean(m),onChange:()=>{e(h.Z.doToggleAllSelected())}}),(0,N.jsx)("label",{htmlFor:"table-header-checkbox",className:"custom-control-label",children:"\xa0"})]})}),(0,N.jsx)(I.Z,{className:"text-center",label:(0,a.ag)("user.fields.avatars")}),(0,N.jsx)(I.Z,{onSort:g,hasRows:i,sorter:u,name:"email",label:(0,a.ag)("user.fields.email")}),(0,N.jsx)(I.Z,{onSort:g,hasRows:i,sorter:u,name:"fullName",label:(0,a.ag)("user.fields.fullName")}),(0,N.jsx)(I.Z,{label:(0,a.ag)("user.fields.roles")}),(0,N.jsx)(I.Z,{className:"text-center",label:(0,a.ag)("user.fields.status")}),(0,N.jsx)(I.Z,{className:"th-actions"})]})}),(0,N.jsxs)("tbody",{children:[t&&(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:100,children:(0,N.jsx)(E.Z,{})})}),!t&&!i&&(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:100,children:(0,N.jsx)("div",{className:"d-flex justify-content-center",children:(0,a.ag)("table.noData")})})}),!t&&n.map((s=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"th-checkbox",scope:"row",children:(0,N.jsxs)("div",{className:"custom-control custom-checkbox",children:[(0,N.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"table-header-checkbox-".concat(s.id),checked:r.includes(s.id),onChange:()=>{return l=s.id,void e(h.Z.doToggleOneSelected(l));var l}}),(0,N.jsx)("label",{htmlFor:"table-header-checkbox-".concat(s.id),className:"custom-control-label",children:"\xa0"})]})}),(0,N.jsx)("td",{className:"text-center",children:(0,N.jsx)(R.Z,{src:s.avatars&&s.avatars.length?s.avatars[0].downloadUrl:void 0,alt:"avatar"})}),(0,N.jsx)("td",{children:s.email}),(0,N.jsx)("td",{children:s.fullName}),(0,N.jsx)("td",{children:s.roles.map((e=>(0,N.jsx)("div",{children:(0,N.jsx)("span",{children:P.Z.labelOf(e)})},e)))}),(0,N.jsx)("td",{className:"text-center",children:(0,N.jsx)(F.Z,{value:s.status})}),(0,N.jsxs)("td",{className:"td-actions",children:[(0,N.jsx)(S.rU,{className:"btn btn-link",to:"/user/".concat(s.id),children:(0,a.ag)("common.view")}),b&&(0,N.jsx)(S.rU,{className:"btn btn-link",to:"/user/".concat(s.id,"/edit"),children:(0,a.ag)("common.edit")}),j&&(0,N.jsx)("button",{className:"btn btn-link",onClick:()=>l(s.id),children:(0,a.ag)("common.destroy")})]})]},s.id)))]})]})}),(0,N.jsx)(V.Z,{onChange:s=>{e(h.Z.doChangePagination(s))},disabled:t,pagination:o})]}),s&&(0,N.jsx)(D.Z,{title:(0,a.ag)("common.areYouSure"),onConfirm:()=>{return a=s,l(null),void e(h.Z.doDestroy(a));var a},onClose:()=>l(null),okText:(0,a.ag)("common.yes"),cancelText:(0,a.ag)("common.no")})]})};var O=l(33640),M=l(23516),A=l(10419);const L=function(e){const s=(0,d.I0)(),l=(0,d.v9)(M.Z.selectPermissionToRead),t=(0,d.v9)(T.Z.selectPermissionToCreate),n=(0,d.v9)(T.Z.selectPermissionToImport),o=(0,d.v9)(T.Z.selectPermissionToDestroy),r=(0,d.v9)(x.Z.selectHasRows),c=(0,d.v9)(x.Z.selectExportLoading),i=(0,d.v9)(x.Z.selectLoading),u=(0,d.v9)(x.Z.selectSelectedKeys),m=()=>{s(h.Z.doExport())},b=()=>{s(h.Z.doDestroyAllSelected())};return(0,N.jsxs)(A.Z,{children:[t&&(0,N.jsx)(S.rU,{to:"/user/new",children:(0,N.jsxs)("button",{className:"btn btn-primary",type:"button",children:[(0,N.jsx)(j.Z,{iconClass:"fas fa-user-plus"})," ",(0,a.ag)("common.new")]})}),n&&(0,N.jsx)(S.rU,{to:"/user/importer",children:(0,N.jsxs)("button",{className:"btn btn-primary",type:"button",children:[(0,N.jsx)(j.Z,{iconClass:"fas fa-upload"})," ",(0,a.ag)("common.import")]})}),(()=>{if(!o)return null;const e=!u.length||i,s=(0,N.jsxs)("button",{disabled:e,className:"btn btn-primary",type:"button",onClick:b,children:[(0,N.jsx)(j.Z,{iconClass:"fas fa-user-minus"})," ",(0,a.ag)("common.destroy")]});return e?(0,N.jsxs)("span",{"data-tip":(0,a.ag)("common.mustSelectARow"),"data-tip-disable":!e,"data-for":"user-users-toolbar-destroy-all-tooltip",children:[s,(0,N.jsx)(O.u,{id:"user-users-toolbar-destroy-all-tooltip"})]}):s})(),l&&(0,N.jsx)(S.rU,{to:"/audit-logs?entityNames=user",children:(0,N.jsxs)("button",{className:"btn btn-light",type:"button",children:[(0,N.jsx)(j.Z,{iconClass:"fas fa-history"})," ",(0,a.ag)("auditLog.menu")]})}),(()=>{const e=!r||i,s=(0,N.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e,onClick:m,children:[(0,N.jsx)(j.Z,{loading:c,iconClass:"far fa-file-excel"})," ",(0,a.ag)("common.export")]});return e?(0,N.jsxs)("span",{"data-tip":(0,a.ag)("common.noDataToExport"),"data-tip-disable":!e,"data-for":"user-users-toolbar-export-tooltip",children:[s,(0,N.jsx)(O.u,{id:"user-users-toolbar-export-tooltip"})]}):s})()]})};const _=function(){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(n.Z,{items:[[(0,a.ag)("dashboard.menu"),"/"],[(0,a.ag)("user.menu")]]}),(0,N.jsxs)(t.Z,{children:[(0,N.jsx)(o.Z,{children:(0,a.ag)("user.title")}),(0,N.jsx)(L,{}),(0,N.jsx)(w,{}),(0,N.jsx)(B,{})]})]})}},93488:(e,s,l)=>{l.d(s,{Z:()=>n});var a=l(10499),t=l(46417);const n=function(e){const{value:s}=e;return s?"active"===s?(0,t.jsx)("span",{className:"badge badge-success",children:(0,a.ag)("user.status.active")}):"empty-permissions"===s?(0,t.jsx)("span",{className:"badge badge-danger",children:(0,a.ag)("user.status.empty-permissions")}):(0,t.jsx)("span",{className:"badge badge-warning",children:(0,a.ag)("user.status.invited")}):null}},93605:(e,s,l)=>{l.d(s,{ZP:()=>r});var a=l(36228),t=l(87462),n=l(47313),o=l(4194),r=(l(5296),l(1168),l(5236),(0,n.forwardRef)((function(e,s){var l=(0,a.u)(e);return n.createElement(o.S,(0,t.Z)({ref:s},l))})))}}]);