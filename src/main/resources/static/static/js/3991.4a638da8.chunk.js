"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[3991],{35014:(e,t,s)=>{s.d(t,{Z:()=>n});const n={selectLoading:(0,s(35323).P1)([e=>e.timeLog.destroy],(e=>Boolean(e.loading)))}},41103:(e,t,s)=>{s.d(t,{Z:()=>m});var n=s(35323),l=s(86495),a=s(26319),o=s(71945);const i=(0,n.P1)([l.Z.selectCurrentTenant,l.Z.selectCurrentUser],((e,t)=>new a.Z(e,t).match(o.Z.values.timeLogRead))),r=(0,n.P1)([l.Z.selectCurrentTenant,l.Z.selectCurrentUser],((e,t)=>new a.Z(e,t).match(o.Z.values.timeLogEdit))),c=(0,n.P1)([l.Z.selectCurrentTenant,l.Z.selectCurrentUser],((e,t)=>new a.Z(e,t).match(o.Z.values.timeLogCreate))),d=(0,n.P1)([l.Z.selectCurrentTenant,l.Z.selectCurrentUser],((e,t)=>new a.Z(e,t).match(o.Z.values.timeLogImport))),m={selectPermissionToRead:i,selectPermissionToEdit:r,selectPermissionToCreate:c,selectPermissionToDestroy:(0,n.P1)([l.Z.selectCurrentTenant,l.Z.selectCurrentUser],((e,t)=>new a.Z(e,t).match(o.Z.values.timeLogDestroy))),selectPermissionToImport:d}},25803:(e,t,s)=>{s.d(t,{Z:()=>d});var n=s(47313),l=s(61378),a=s.n(l),o=(s(72632),s(75627)),i=s(49384),r=s(46417);function c(e){const{label:t,name:s,hint:l,placeholder:c,autoFocus:d,required:m,showTimeInput:h,externalErrorMessage:u}=e,{register:g,formState:{touchedFields:x,errors:b,isSubmitted:j},setValue:p,watch:Z}=(0,o.Gc)(),f=i.Z.errorMessage(s,b,x,j,u),v=Z(s);(0,n.useEffect)((()=>{g(s)}),[g,s]);const y=()=>v?Array.isArray(!v)?null:v.length&&v[0]||null:null,N=()=>v?Array.isArray(!v)||v.length<2?null:v[1]||null:null;return(0,r.jsxs)("div",{className:"form-group",children:[Boolean(t)&&(0,r.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:s,children:t}),(0,r.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",alignItems:"baseline"},children:[(0,r.jsx)(a(),{id:"".concat(s,"Start"),name:"".concat(s,"Start"),onChange:t=>(t=>{p(s,[t,N()],{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange([t,N()])})(t),onBlur:t=>{e.onBlur&&e.onBlur(t)},selected:y(),className:"form-control ".concat(f?"is-invalid":""),showTimeInput:h,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}},placeholderText:c||"",autoFocus:d||void 0,autoComplete:"off",dateFormat:h?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15}),(0,r.jsx)("div",{style:{flexShrink:1,marginLeft:"8px",marginRight:"8px"},children:"~"}),(0,r.jsx)(a(),{id:"".concat(s,"End"),name:"".concat(s,"End"),onChange:t=>(t=>{p(s,[y(),t],{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange([y(),t])})(t),onBlur:t=>{e.onBlur&&e.onBlur(t)},selected:N(),className:"form-control ".concat(f?"is-invalid":""),showTimeInput:h,placeholderText:c||"",autoFocus:d||void 0,autoComplete:"off",dateFormat:h?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}}})]}),(0,r.jsx)("div",{className:"invalid-feedback",children:f}),Boolean(l)&&(0,r.jsx)("small",{className:"form-text text-muted",children:l})]})}c.defaultProps={required:!1};const d=c},44587:(e,t,s)=>{s.d(t,{Z:()=>o});var n=s(64214),l=s(47313),a=s(46417);const o=e=>{const t=(0,l.useRef)(),[s,o]=(0,l.useState)(null);(0,l.useEffect)((()=>{if(t.current){const e=new n.u_(t.current);e.show(),o(e)}}),[]);const i=()=>{if(s){s.hide();new n.u_(t.current).hide(),e.onClose()}};return(0,a.jsx)("div",{ref:t,className:"modal",tabIndex:-1,children:(0,a.jsx)("div",{className:"modal-dialog modal-sm",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("h5",{className:"modal-title",children:e.title}),(0,a.jsx)("button",{type:"button",className:"close",onClick:i,"data-dismiss":"modal",children:(0,a.jsx)("span",{children:"\xd7"})})]}),(0,a.jsxs)("div",{className:"modal-footer",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-light btn-sm","data-dismiss":"modal",onClick:i,children:e.cancelText}),(0,a.jsx)("button",{type:"button",onClick:()=>(window.$(t.current).modal("hide"),e.onConfirm()),className:"btn btn-primary btn-sm",children:e.okText})]})]})})})}},13991:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var n=s(10499),l=s(27829),a=s(53852),o=s(75352),i=s(62563),r=s(47313),c=s(75627),d=s(85554),m=s(40846),h=s(47590),u=s(55096),g=s(54879),x=s(95748),b=s(13586),j=s(25803),p=s(47575),Z=s(69138),f=s(21933),v=s(1876),y=s(46417);const N=f.Ry().shape({employee:h.Z.relationToOne((0,n.ag)("entities.timeLog.fields.employee")),email:h.Z.string((0,n.ag)("entities.timeLog.fields.email")),startRange:h.Z.datetimeRange((0,n.ag)("entities.timeLog.fields.startRange")),endRange:h.Z.datetimeRange((0,n.ag)("entities.timeLog.fields.endRange")),workItem:h.Z.string((0,n.ag)("entities.timeLog.fields.workItem"))}),w={employee:null,email:null,startRange:[],endRange:[],workItem:null},C={employee:{label:(0,n.ag)("entities.timeLog.fields.employee"),render:m.Z.relationToOne()},email:{label:(0,n.ag)("entities.timeLog.fields.email"),render:m.Z.generic()},startRange:{label:(0,n.ag)("entities.timeLog.fields.startRange"),render:m.Z.datetimeRange()},endRange:{label:(0,n.ag)("entities.timeLog.fields.endRange"),render:m.Z.datetimeRange()},workItem:{label:(0,n.ag)("entities.timeLog.fields.workItem"),render:m.Z.generic()}},k=e=>{const t=(0,d.I0)(),s=(0,d.v9)(g.Z.selectRawFilter),[l,a]=(0,r.useState)(!1),[o]=(0,r.useState)((()=>({...w,...s}))),m=(0,c.cI)({resolver:(0,i.X)(N),defaultValues:o,mode:"all"});(0,r.useEffect)((()=>{t(u.Z.doFetch(N.cast(o),s))}),[t]);const h=e=>{const s=m.getValues();t(u.Z.doFetch(e,s)),a(!1)};return(0,y.jsxs)(Z.Z,{children:[(0,y.jsx)(b.Z,{onClick:()=>{a(!l)},renders:C,values:s,expanded:l,onRemove:e=>(m.setValue(e,w[e]),m.handleSubmit(h)())}),(0,y.jsx)("div",{className:"container",children:(0,y.jsx)("div",{className:"collapse ".concat(l?"show":""),children:(0,y.jsx)(c.RV,{...m,children:(0,y.jsxs)("form",{onSubmit:m.handleSubmit(h),children:[(0,y.jsxs)("div",{className:"row",children:[(0,y.jsx)("div",{className:"col-lg-6 col-12",children:(0,y.jsx)(v.Z,{name:"employee",label:(0,n.ag)("entities.timeLog.fields.employee")})}),(0,y.jsx)("div",{className:"col-lg-6 col-12",children:(0,y.jsx)(p.Z,{name:"email",label:(0,n.ag)("entities.timeLog.fields.email")})}),(0,y.jsx)("div",{className:"col-lg-6 col-12",children:(0,y.jsx)(j.Z,{name:"startRange",label:(0,n.ag)("entities.timeLog.fields.startRange"),showTimeInput:!0})}),(0,y.jsx)("div",{className:"col-lg-6 col-12",children:(0,y.jsx)(j.Z,{name:"endRange",label:(0,n.ag)("entities.timeLog.fields.endRange"),showTimeInput:!0})}),(0,y.jsx)("div",{className:"col-lg-6 col-12",children:(0,y.jsx)(p.Z,{name:"workItem",label:(0,n.ag)("entities.timeLog.fields.workItem")})})]}),(0,y.jsx)("div",{className:"row",children:(0,y.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,y.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:e.loading,children:[(0,y.jsx)(x.Z,{loading:e.loading,iconClass:"fas fa-search"})," ",(0,n.ag)("common.search")]}),(0,y.jsxs)("button",{className:"btn btn-light",type:"button",onClick:()=>{Object.keys(w).forEach((e=>{m.setValue(e,w[e])})),t(u.Z.doReset()),a(!1)},disabled:e.loading,children:[(0,y.jsx)(x.Z,{loading:e.loading,iconClass:"fas fa-undo"})," ",(0,n.ag)("common.reset")]})]})})]})})})})]})};var L=s(2135),R=s(68087),T=s(35014),S=s(41103),I=s(44587),P=s(61567),E=s(27216),F=s(97249),M=s(98848),U=s(20627);const A=e=>{const t=(0,d.v9)(U.Z.selectPermissionToRead),s=()=>{const{value:t}=e;return t?Array.isArray(t)?t:[t]:[]};return s().length?(0,y.jsx)(y.Fragment,{children:s().map((e=>{return s=e,t?(0,y.jsx)("div",{children:(0,y.jsx)(L.rU,{className:"btn btn-link",to:"/employee/".concat(s.id),children:s.email})},s.id):(0,y.jsx)("div",{children:s.email},s.id);var s}))}):null},B=e=>{const[t,s]=(0,r.useState)(null),l=(0,d.I0)(),a=(0,d.v9)(g.Z.selectLoading),o=(0,d.v9)(T.Z.selectLoading),i=a||o,c=(0,d.v9)(g.Z.selectRows),m=(0,d.v9)(g.Z.selectPagination),h=(0,d.v9)(g.Z.selectSelectedKeys),x=(0,d.v9)(g.Z.selectHasRows),b=(0,d.v9)(g.Z.selectSorter),j=(0,d.v9)(g.Z.selectIsAllSelected),p=(0,d.v9)(S.Z.selectPermissionToEdit),Z=(0,d.v9)(S.Z.selectPermissionToDestroy),f=()=>{s(null)},v=e=>{const t=b.field===e&&"ascend"===b.order?"descend":"ascend";l(u.Z.doChangeSort({field:e,order:t}))};return(0,y.jsxs)(E.Z,{children:[(0,y.jsx)("div",{className:"table-responsive",children:(0,y.jsxs)("table",{className:"table table-striped mt-2",children:[(0,y.jsx)("thead",{className:"thead",children:(0,y.jsxs)("tr",{children:[(0,y.jsx)(M.Z,{className:"th-checkbox",children:x&&(0,y.jsxs)("div",{className:"custom-control custom-checkbox",children:[(0,y.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"table-header-checkbox",checked:Boolean(j),onChange:()=>{l(u.Z.doToggleAllSelected())}}),(0,y.jsx)("label",{htmlFor:"table-header-checkbox",className:"custom-control-label",children:"\xa0"})]})}),(0,y.jsx)(M.Z,{label:(0,n.ag)("entities.timeLog.fields.employee")}),(0,y.jsx)(M.Z,{onSort:v,hasRows:x,sorter:b,name:"email",label:(0,n.ag)("entities.timeLog.fields.email")}),(0,y.jsx)(M.Z,{onSort:v,hasRows:x,sorter:b,name:"start",label:(0,n.ag)("entities.timeLog.fields.start")}),(0,y.jsx)(M.Z,{onSort:v,hasRows:x,sorter:b,name:"end",label:(0,n.ag)("entities.timeLog.fields.end")}),(0,y.jsx)(M.Z,{onSort:v,hasRows:x,sorter:b,name:"workItem",label:(0,n.ag)("entities.timeLog.fields.workItem")}),(0,y.jsx)(M.Z,{className:"th-actions"})]})}),(0,y.jsxs)("tbody",{children:[i&&(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:100,children:(0,y.jsx)(P.Z,{})})}),!i&&!x&&(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:100,children:(0,y.jsx)("div",{className:"d-flex justify-content-center",children:(0,n.ag)("table.noData")})})}),!i&&c.map((e=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{className:"th-checkbox",scope:"row",children:(0,y.jsxs)("div",{className:"custom-control custom-checkbox",children:[(0,y.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"table-header-checkbox-".concat(e.id),checked:h.includes(e.id),onChange:()=>{return t=e.id,void l(u.Z.doToggleOneSelected(t));var t}}),(0,y.jsx)("label",{htmlFor:"table-header-checkbox-".concat(e.id),className:"custom-control-label",children:"\xa0"})]})}),(0,y.jsx)("td",{children:(0,y.jsx)(A,{value:e.employee})}),(0,y.jsx)("td",{children:e.email}),(0,y.jsx)("td",{children:e.start}),(0,y.jsx)("td",{children:e.end}),(0,y.jsx)("td",{children:e.workItem}),(0,y.jsxs)("td",{className:"td-actions",children:[(0,y.jsx)(L.rU,{className:"btn btn-link",to:"/time-log/".concat(e.id),children:(0,n.ag)("common.view")}),p&&(0,y.jsx)(L.rU,{className:"btn btn-link",to:"/time-log/".concat(e.id,"/edit"),children:(0,n.ag)("common.edit")}),Z&&(0,y.jsx)("button",{className:"btn btn-link",type:"button",onClick:()=>{return t=e.id,void s(t);var t},children:(0,n.ag)("common.destroy")})]})]},e.id)))]})]})}),(0,y.jsx)(F.Z,{onChange:e=>{l(u.Z.doChangePagination(e))},disabled:i,pagination:m}),t&&(0,y.jsx)(I.Z,{title:(0,n.ag)("common.areYouSure"),onConfirm:()=>{return e=t,f(),void l(R.Z.doDestroy(e));var e},onClose:()=>f(),okText:(0,n.ag)("common.yes"),cancelText:(0,n.ag)("common.no")})]})};var D=s(33640),V=s(23516),H=s(10419);const O=e=>{const[t,s]=(0,r.useState)(!1),l=(0,d.I0)(),a=(0,d.v9)(g.Z.selectSelectedKeys),o=(0,d.v9)(g.Z.selectLoading),i=(0,d.v9)(T.Z.selectLoading),c=(0,d.v9)(g.Z.selectExportLoading),m=(0,d.v9)(g.Z.selectHasRows),h=(0,d.v9)(V.Z.selectPermissionToRead),b=(0,d.v9)(S.Z.selectPermissionToDestroy),j=(0,d.v9)(S.Z.selectPermissionToCreate),p=(0,d.v9)(S.Z.selectPermissionToImport),Z=()=>{s(!0)},f=()=>{s(!1)},v=()=>{l(u.Z.doExport())};return(0,y.jsxs)(H.Z,{children:[j&&(0,y.jsx)(L.rU,{to:"/time-log/new",children:(0,y.jsxs)("button",{className:"btn btn-primary",type:"button",children:[(0,y.jsx)(x.Z,{iconClass:"fas fa-plus"})," ",(0,n.ag)("common.new")]})}),p&&(0,y.jsx)(L.rU,{to:"/time-log/importer",children:(0,y.jsxs)("button",{className:"btn btn-primary",type:"button",children:[(0,y.jsx)(x.Z,{iconClass:"fas fa-upload"})," ",(0,n.ag)("common.import")]})}),(()=>{if(!b)return null;const e=!a.length||o,t=(0,y.jsxs)("button",{disabled:e,className:"btn btn-primary",type:"button",onClick:Z,children:[(0,y.jsx)(x.Z,{loading:i,iconClass:"far fa-trash-alt"})," ",(0,n.ag)("common.destroy")]});return e?(0,y.jsxs)("span",{"data-tip":(0,n.ag)("common.mustSelectARow"),"data-tip-disable":!e,"data-for":"timeLog-list-toolbar-destroy-tooltip",children:[t,(0,y.jsx)(D.u,{id:"timeLog-list-toolbar-destroy-tooltip"})]}):t})(),h&&(0,y.jsx)(L.rU,{to:"/audit-logs?entityNames=timeLog",children:(0,y.jsxs)("button",{className:"btn btn-light",type:"button",children:[(0,y.jsx)(x.Z,{iconClass:"fas fa-history"})," ",(0,n.ag)("auditLog.menu")]})}),(()=>{const e=!m||o,t=(0,y.jsxs)("button",{className:"btn btn-light",disabled:e,onClick:v,type:"button",children:[(0,y.jsx)(x.Z,{loading:c,iconClass:"far fa-file-excel"})," ",(0,n.ag)("common.export")]});return e?(0,y.jsxs)("span",{"data-tip":(0,n.ag)("common.noDataToExport"),"data-tip-disable":!e,"data-for":"timeLog-list-toolbar-export-tooltip",children:[t,(0,y.jsx)(D.u,{id:"timeLog-list-toolbar-export-tooltip"})]}):t})(),t&&(0,y.jsx)(I.Z,{title:(0,n.ag)("common.areYouSure"),onConfirm:()=>(f(),void l(R.Z.doDestroyAll(a))),onClose:()=>f(),okText:(0,n.ag)("common.yes"),cancelText:(0,n.ag)("common.no")})]})},_=e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(a.Z,{items:[[(0,n.ag)("dashboard.menu"),"/"],[(0,n.ag)("entities.timeLog.menu")]]}),(0,y.jsxs)(l.Z,{children:[(0,y.jsx)(o.Z,{children:(0,n.ag)("entities.timeLog.list.title")}),(0,y.jsx)(O,{}),(0,y.jsx)(k,{}),(0,y.jsx)(B,{})]})]})}}]);