"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[2425],{27829:(e,n,t)=>{t.d(n,{Z:()=>l});var a,s=t(30168);const l=t(20346).ZP.div(a||(a=(0,s.Z)(["\n  margin-top: 16px;\n  padding: 24px;\n  background-color: white;\n  width: 100%;\n  border-radius: 5px;\n  border: 1px solid #dee2e6 !important;\n"])))},53852:(e,n,t)=>{t.d(n,{Z:()=>d});var a,s=t(30168),l=t(2135),o=t(20346),i=t(46417);const r=o.ZP.nav(a||(a=(0,s.Z)(["\n  .breadcrumb {\n    font-size: 13px;\n    margin: 0px;\n    padding: 0px;\n    background-color: transparent;\n  }\n\n  .breadcrumb-item:not(.active) a {\n    color: rgba(0, 0, 0, 0.45);\n  }\n"])));const d=function(e){const n=e=>e.length>1;return(0,i.jsx)(r,{children:(0,i.jsx)("ol",{className:"breadcrumb",children:e.items.map(((t,a)=>(0,i.jsx)("li",{className:"breadcrumb-item ".concat(e.items.length-1===a?"active":""),children:n(t)?(0,i.jsx)(l.rU,{to:t[1],children:t[0]}):t[0]},t[0])))})})}},95748:(e,n,t)=>{t.d(n,{Z:()=>s});var a=t(46417);const s=e=>e.loading?(0,a.jsx)("span",{className:"spinner-border spinner-border-sm"}):e.iconClass?(0,a.jsx)("i",{className:e.iconClass}):null},61567:(e,n,t)=>{t.d(n,{Z:()=>s});var a=t(46417);const s=function(){return(0,a.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,a.jsx)("div",{className:"spinner-border text-primary"})})}},49384:(e,n,t)=>{t.d(n,{Z:()=>a});class a{static errorMessage(e,n,t,a){var s;let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(l)return l;if(!a&&!t[e])return null;const o=n[e];return(null===o||void 0===o||null===(s=o[0])||void 0===s?void 0:s.message)||(null===o||void 0===o?void 0:o.message)||o||null}}},47575:(e,n,t)=>{t.d(n,{Z:()=>r});var a=t(47313),s=t(75627),l=t(49384),o=t(46417);function i(e){const{label:n,name:t,hint:i,type:r,placeholder:d,autoFocus:c,autoComplete:m,required:u,externalErrorMessage:g,disabled:p,endAdornment:h}=e,{setValue:v,watch:x,register:b,formState:{touchedFields:f,isSubmitted:j,errors:y}}=(0,s.Gc)(),Z=l.Z.errorMessage(t,y,f,j,g);return(0,a.useEffect)((()=>{b(t)}),[b,t]),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsxs)("div",{className:h?"input-group":"",children:[Boolean(n)&&(0,o.jsx)("label",{className:"col-form-label ".concat(u?"required":null),htmlFor:t,children:n}),(0,o.jsx)("input",{id:t,name:t,type:r,value:x(t),onChange:n=>{v(t,n.target.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n.target.value)},onBlur:n=>{e.onBlur&&e.onBlur(n)},placeholder:d||void 0,autoFocus:c||void 0,autoComplete:m||void 0,disabled:p,className:"form-control ".concat(Z?"is-invalid":"")}),h&&(0,o.jsx)("div",{className:"input-group-append",children:(0,o.jsx)("span",{className:"input-group-text",children:h})})]}),(0,o.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(i)&&(0,o.jsx)("small",{className:"form-text text-muted",children:i})]})}i.defaultProps={type:"text",required:!1};const r=i},75352:(e,n,t)=>{t.d(n,{Z:()=>l});var a,s=t(30168);const l=t(20346).ZP.h1(a||(a=(0,s.Z)(["\n  margin-bottom: 24px;\n"])))},17002:(e,n,t)=>{t.r(n),t.d(n,{default:()=>O});var a=t(47313),s=t(85554),l=t(58467),o=t(10499),i=t(48704),r=t(48760),d=t(35323);const c=e=>e.timeLog.form,m=(0,d.P1)([c],(e=>e.record)),u={selectInitLoading:(0,d.P1)([c],(e=>Boolean(e.initLoading))),selectSaveLoading:(0,d.P1)([c],(e=>Boolean(e.saveLoading))),selectRecord:m,selectRaw:c};var g=t(27829),p=t(53852),h=t(61567),v=t(75352),x=t(62563),b=t(70816),f=t.n(b),j=t(75627),y=t(89994),Z=t(1876),N=t(95748),C=t(61378),w=t.n(C),L=(t(72632),t(49384)),k=t(46417);function I(e){const{label:n,name:t,hint:s,placeholder:l,autoFocus:o,externalErrorMessage:i,required:r,showTimeInput:d}=e,{register:c,formState:{touchedFields:m,errors:u,isSubmitted:g},setValue:p,watch:h}=(0,j.Gc)();(0,a.useEffect)((()=>{c(t)}),[c,t]);const v=L.Z.errorMessage(t,u,m,g,i);return(0,k.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,k.jsx)("label",{className:"col-form-label ".concat(r?"required":null),htmlFor:t,children:n})," ",(0,k.jsx)("br",{}),(0,k.jsx)(w(),{id:t,name:t,className:"form-control ".concat(v?"is-invalid":""),onChange:n=>{p(t,n,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n)},onBlur:n=>{e.onBlur&&e.onBlur(n)},selected:h(t),showTimeInput:d,popperModifiers:{preventOverflow:{enabled:!0,escapeWithReference:!1}},placeholderText:l||"",autoFocus:o||void 0,autoComplete:"off",dateFormat:d?"yyyy-MM-dd HH:mm":"yyyy-MM-dd",timeIntervals:15}),(0,k.jsx)("div",{className:"invalid-feedback",children:v}),Boolean(s)&&(0,k.jsx)("small",{className:"form-text text-muted",children:s})]})}I.defaultProps={required:!1};const B=I;var S=t(47575),F=t(68160);const M=t(21933).Ry().shape({employee:y.Z.relationToOne((0,o.ag)("entities.employee.fields.employee"),{}),email:y.Z.string((0,o.ag)("entities.email.fields.email"),{}),start:y.Z.datetime((0,o.ag)("entities.start.fields.start"),{}),end:y.Z.datetime((0,o.ag)("entities.end.fields.end"),{}),workItem:y.Z.string((0,o.ag)("entities.workItem.fields.workItem"),{})}),P=e=>{const[n]=(0,a.useState)((()=>{const n=e.record||{};return{employee:n.employee,email:n.email,start:n.start?f()(n.start).toDate():null,end:n.end?f()(n.end).toDate():null,workItem:n.workItem}})),t=(0,j.cI)({resolver:(0,x.X)(M),mode:"all",defaultValues:n}),s=n=>{var t;e.onSubmit(null===e||void 0===e||null===(t=e.record)||void 0===t?void 0:t.id,n)};return(0,k.jsx)(F.Z,{children:(0,k.jsx)(j.RV,{...t,children:(0,k.jsxs)("form",{onSubmit:t.handleSubmit(s),children:[(0,k.jsxs)("div",{className:"row",children:[(0,k.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,k.jsx)(Z.Z,{name:"employee",label:(0,o.ag)("entities.timeLog.fields.employee"),showCreate:!e.modal})}),(0,k.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,k.jsx)(S.Z,{name:"email",label:(0,o.ag)("entities.timeLog.fields.email")})}),(0,k.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,k.jsx)(B,{name:"start",label:(0,o.ag)("entities.timeLog.fields.start"),showTimeInput:!0})}),(0,k.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,k.jsx)(B,{name:"end",label:(0,o.ag)("entities.timeLog.fields.end"),showTimeInput:!0})}),(0,k.jsx)("div",{className:"col-lg-7 col-md-8 col-12"})]}),(0,k.jsxs)("div",{className:"form-buttons",children:[(0,k.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:t.handleSubmit(s),children:[(0,k.jsx)(N.Z,{loading:e.saveLoading,iconClass:"far fa-save"})," ",(0,o.ag)("common.save")]}),(0,k.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:()=>{Object.keys(n).forEach((e=>{t.setValue(e,n[e])}))},children:[(0,k.jsx)("i",{className:"fas fa-undo"})," ",(0,o.ag)("common.reset")]}),e.onCancel?(0,k.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:()=>e.onCancel(),children:[(0,k.jsx)("i",{className:"fas fa-times"})," ",(0,o.ag)("common.cancel")]}):null]})]})})})},O=e=>{const[n,t]=(0,a.useState)(!1),d=(0,s.I0)(),{id:c}=(0,l.UO)(),m=(0,s.v9)(u.selectInitLoading),x=(0,s.v9)(u.selectSaveLoading),b=(0,s.v9)(u.selectRecord),f=Boolean(c),j=f?(0,o.ag)("entities.timeLog.edit.title"):(0,o.ag)("entities.timeLog.new.title");(0,a.useEffect)((()=>{d(r.Z.doInit(c)),t(!0)}),[d,c]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.Z,{items:[[(0,o.ag)("dashboard.menu"),"/"],[(0,o.ag)("entities.timeLog.menu"),"/time-log"],[j]]}),(0,k.jsxs)(g.Z,{children:[(0,k.jsx)(v.Z,{children:j}),m&&(0,k.jsx)(h.Z,{}),n&&!m&&(0,k.jsx)(P,{saveLoading:x,initLoading:m,record:b,isEditing:f,onSubmit:(e,n)=>{d(f?r.Z.doUpdate(e,n):r.Z.doCreate(n))},onCancel:()=>(0,i.s1)().push("/time-log")})]})]})}},87462:(e,n,t)=>{function a(){return a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},a.apply(this,arguments)}t.d(n,{Z:()=>a})}}]);