"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[2090],{89994:(e,n,a)=>{a.d(n,{Z:()=>o});var l=a(70816),r=a.n(l),t=a(10499),i=a(21933);const o={generic:e=>i.nK().label(e),string(e,n){n=n||{};let a=i.Z_().transform(((e,n)=>""===n?null:e)).nullable().trim().label(e);return n.required&&(a=a.required()),(n.min||0===n.min)&&(a=a.min(n.min)),n.max&&(a=a.max(n.max)),n.matches&&(a=a.matches(n.matches)),a},boolean:(e,n)=>i.Xg().default(!1).label(e),relationToOne(e,n){n=n||{};let a=i.nK().nullable().label(e).transform(((e,n)=>n?n.id:null));return n.required&&(a=a.required()),a},stringArray(e,n){n=n||{};let a=i.IX().compact().ensure().of(i.Z_().transform(((e,n)=>""===n?null:e)).trim()).label(e);return(n.required||n.min)&&(a=a.required()),n.min||0===n.min?a=a.min(n.min):n.required&&(a=a.min(1)),n.max&&(a=a.max(n.max)),a},relationToMany(e,n){n=n||{};let a=i.IX().nullable().label(e).transform(((e,n)=>n&&n.length?n.map((e=>e.id)):[]));return(n.required||n.min)&&(a=a.required()),n.min||0===n.min?a=a.min(n.min):n.required&&(a=a.min(1)),n.max&&(a=a.max(n.max)),a},integer(e,n){n=n||{};let a=i.Rx().transform(((e,n)=>""===n?null:e)).integer().nullable().label(e);return n.required&&(a=a.required()),(n.min||0===n.min)&&(a=a.min(n.min)),n.max&&(a=a.max(n.max)),a},images(e,n){n=n||{};let a=i.IX().nullable().label(e);return(n.required||n.min)&&(a=a.required()),n.min||0===n.min?a=a.min(n.min):n.required&&(a=a.min(1)),n.max&&(a=a.max(n.max)),a},files(e,n){n=n||{};let a=i.IX().compact().ensure().nullable().label(e);return(n.required||n.min)&&(a=a.required()),n.min||0===n.min?a=a.min(n.min):n.required&&(a=a.min(1)),n.max&&(a=a.max(n.max)),a},enumerator(e,n){n=n||{};let a=i.Z_().transform(((e,n)=>""===n?null:e)).label(e).nullable().oneOf([null,...n.options||[]]);return n.required&&(a=a.required((0,t.ag)("validation.string.selected"))),a},email(e,n){n=n||{};let a=i.Z_().transform(((e,n)=>""===n?null:e)).nullable().trim().label(e).email();return n.required&&(a=a.required()),(n.min||0===n.min)&&(a=a.min(n.min)),n.max&&(a=a.max(n.max)),n.matches&&(a=a.matches(n.matches)),a},decimal(e,n){n=n||{};let a=i.Rx().transform(((e,n)=>""===n?null:e)).nullable().label(e);return n.required&&(a=a.required()),(n.min||0===n.min)&&(a=a.min(n.min)),n.max&&(a=a.max(n.max)),a},datetime(e,n){n=n||{};let a=i.nK().nullable().label(e).transform(((e,n)=>e?r()(n,"YYYY-MM-DD HH:mm").toISOString():null));return n.required&&(a=a.required()),a},date(e,n){n=n||{};let a=i.nK().nullable().label(e).test("is-date",(0,t.ag)("validation.mixed.default"),(e=>!e||r()(e,"YYYY-MM-DD").isValid())).transform((e=>e?r()(e).format("YYYY-MM-DD"):null));return n.required&&(a=a.required()),a}}},47921:(e,n,a)=>{a.d(n,{Z:()=>i});var l=a(35323);const r=e=>e.user.form,t=(0,l.P1)([r],(e=>e.user)),i={selectInitLoading:(0,l.P1)([r],(e=>Boolean(e.initLoading))),selectSaveLoading:(0,l.P1)([r],(e=>Boolean(e.saveLoading))),selectUser:t,selectRaw:r}},63442:(e,n,a)=>{a.d(n,{Z:()=>r});var l=a(17366);const r={status:["active","invited","empty-permissions"],roles:Object.keys(l.Z.values)}},27829:(e,n,a)=>{a.d(n,{Z:()=>t});var l,r=a(30168);const t=a(20346).ZP.div(l||(l=(0,r.Z)(["\n  margin-top: 16px;\n  padding: 24px;\n  background-color: white;\n  width: 100%;\n  border-radius: 5px;\n  border: 1px solid #dee2e6 !important;\n"])))},53852:(e,n,a)=>{a.d(n,{Z:()=>d});var l,r=a(30168),t=a(2135),i=a(20346),o=a(46417);const s=i.ZP.nav(l||(l=(0,r.Z)(["\n  .breadcrumb {\n    font-size: 13px;\n    margin: 0px;\n    padding: 0px;\n    background-color: transparent;\n  }\n\n  .breadcrumb-item:not(.active) a {\n    color: rgba(0, 0, 0, 0.45);\n  }\n"])));const d=function(e){const n=e=>e.length>1;return(0,o.jsx)(s,{children:(0,o.jsx)("ol",{className:"breadcrumb",children:e.items.map(((a,l)=>(0,o.jsx)("li",{className:"breadcrumb-item ".concat(e.items.length-1===l?"active":""),children:n(a)?(0,o.jsx)(t.rU,{to:a[1],children:a[0]}):a[0]},a[0])))})})}},95748:(e,n,a)=>{a.d(n,{Z:()=>r});var l=a(46417);const r=e=>e.loading?(0,l.jsx)("span",{className:"spinner-border spinner-border-sm"}):e.iconClass?(0,l.jsx)("i",{className:e.iconClass}):null},49384:(e,n,a)=>{a.d(n,{Z:()=>l});class l{static errorMessage(e,n,a,l){var r;let t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(t)return t;if(!l&&!a[e])return null;const i=n[e];return(null===i||void 0===i||null===(r=i[0])||void 0===r?void 0:r.message)||(null===i||void 0===i?void 0:i.message)||i||null}}},47575:(e,n,a)=>{a.d(n,{Z:()=>s});var l=a(47313),r=a(75627),t=a(49384),i=a(46417);function o(e){const{label:n,name:a,hint:o,type:s,placeholder:d,autoFocus:u,autoComplete:m,required:c,externalErrorMessage:g,disabled:p,endAdornment:b}=e,{setValue:h,watch:f,register:v,formState:{touchedFields:x,isSubmitted:C,errors:Z}}=(0,r.Gc)(),j=t.Z.errorMessage(a,Z,x,C,g);return(0,l.useEffect)((()=>{v(a)}),[v,a]),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("div",{className:b?"input-group":"",children:[Boolean(n)&&(0,i.jsx)("label",{className:"col-form-label ".concat(c?"required":null),htmlFor:a,children:n}),(0,i.jsx)("input",{id:a,name:a,type:s,value:f(a),onChange:n=>{h(a,n.target.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n.target.value)},onBlur:n=>{e.onBlur&&e.onBlur(n)},placeholder:d||void 0,autoFocus:u||void 0,autoComplete:m||void 0,disabled:p,className:"form-control ".concat(j?"is-invalid":"")}),b&&(0,i.jsx)("div",{className:"input-group-append",children:(0,i.jsx)("span",{className:"input-group-text",children:b})})]}),(0,i.jsx)("div",{className:"invalid-feedback",children:j}),Boolean(o)&&(0,i.jsx)("small",{className:"form-text text-muted",children:o})]})}o.defaultProps={type:"text",required:!1};const s=o},5544:(e,n,a)=>{a.d(n,{Z:()=>u});var l=a(47313),r=a(75627),t=a(93605),i=a(10499),o=a(49384),s=a(46417);function d(e){const{label:n,name:a,hint:d,options:u,required:m,mode:c,placeholder:g,isClearable:p,externalErrorMessage:b}=e,{register:h,formState:{touchedFields:f,errors:v,isSubmitted:x},setValue:C,watch:Z}=(0,r.Gc)(),j=o.Z.errorMessage(a,v,f,x,b),q=Z(a);(0,l.useEffect)((()=>{h(a)}),[h,a]);const N=()=>q?q.map((e=>u.find((n=>n.value===e)))):[],w=()=>{const{options:n}=e;return null!=q?n.find((e=>e.value===q)):null},y=n=>{if(!n)return C(a,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));const l=n.map((e=>e?e.value:e)).filter((e=>null!=e));C(a,l,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(l)},O=n=>{if(!n)return C(a,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));C(a,n.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(n.value)},M=Boolean(j)?{container:e=>({...e,color:"hsl(0,0%,20%)"}),control:e=>({...e,borderColor:"red"})}:{container:e=>({...e,color:"hsl(0,0%,20%)"})};return(0,s.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,s.jsx)("label",{className:"col-form-label ".concat(m?"required":null),children:n}),(0,s.jsx)("br",{}),(0,s.jsx)(t.ZP,{className:"w-100",value:(()=>{const{mode:n}=e;return"multiple"===n?N():w()})(),onChange:n=>{const{mode:a}=e;return"multiple"===a?y(n):O(n)},onBlur:n=>{e.onBlur&&e.onBlur(n)},id:a,name:a,options:u,isMulti:"multiple"===c,placeholder:g||"",isClearable:p,styles:M,loadingMessage:()=>(0,i.ag)("autocomplete.loading"),noOptionsMessage:()=>(0,i.ag)("autocomplete.noOptions")}),(0,s.jsx)("div",{className:"invalid-feedback",children:j}),Boolean(d)&&(0,s.jsx)("small",{className:"form-text text-muted",children:d})]})}d.defaultProps={required:!1,isClearable:!0};const u=d},37943:(e,n,a)=>{a.d(n,{Z:()=>u});var l=a(47313),r=a(75627),t=a(11495),i=a(10499),o=a(49384),s=a(46417);function d(e){const{label:n,name:a,hint:d,externalErrorMessage:u,required:m,placeholder:c,isClearable:g,notFoundContent:p}=e,{register:b,formState:{touchedFields:h,errors:f,isSubmitted:v},setValue:x,watch:C}=(0,r.Gc)(),Z=o.Z.errorMessage(a,f,h,v,u);(0,l.useEffect)((()=>{b(a)}),[b,a]);const j=C(a),q=Boolean(Z)?{control:e=>({...e,borderColor:"red"})}:void 0;return(0,s.jsxs)("div",{className:"form-group",children:[Boolean(n)&&(0,s.jsx)("label",{className:"col-form-label ".concat(m?"required":null),children:n}),(0,s.jsx)("br",{}),(0,s.jsx)(t.Z,{className:"w-100",value:j&&j.length?j.map((e=>({value:e,label:e}))):[],onChange:n=>{if(!n||!n.length)return x(a,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));const l=n.map((e=>e.value)).join(",").split(",");x(a,l,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(l)},onBlur:n=>{e.onBlur&&e.onBlur(n)},id:a,name:a,placeholder:c||"",isClearable:g,styles:q,isMulti:!0,formatCreateLabel:e=>e,loadingMessage:()=>(0,i.ag)("autocomplete.loading"),noOptionsMessage:()=>p||""}),(0,s.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(d)&&(0,s.jsx)("small",{className:"form-text text-muted",children:d})]})}d.defaultProps={required:!1,isClearable:!0};const u=d},68160:(e,n,a)=>{a.d(n,{Z:()=>t});var l,r=a(30168);const t=a(20346).ZP.div(l||(l=(0,r.Z)(["\n  padding-top: 0;\n  padding-bottom: 0;\n\n  label.required::before {\n    display: inline-block;\n    margin-right: 4px;\n    content: '*';\n    line-height: 1;\n    font-size: 13px;\n    color: #f5222d;\n  }\n\n  .react-datepicker-wrapper {\n    width: 100%;\n  }\n\n  .custom-control {\n    z-index: 0;\n  }\n\n  .invalid-feedback {\n    display: block;\n  }\n\n  .form-buttons {\n    padding-top: 16px;\n\n    .btn {\n      margin-right: 8px;\n      margin-bottom: 8px;\n    }\n  }\n"])))},75352:(e,n,a)=>{a.d(n,{Z:()=>t});var l,r=a(30168);const t=a(20346).ZP.h1(l||(l=(0,r.Z)(["\n  margin-bottom: 24px;\n"])))},92090:(e,n,a)=>{a.r(n),a.d(n,{default:()=>y});var l=a(47313),r=a(85554),t=a(10499),i=a(48704),o=a(541),s=a(47921),d=a(27829),u=a(53852),m=a(75352),c=a(62563),g=a(75627),p=a(89994),b=a(63442),h=a(95748),f=a(47575),v=a(5544),x=a(37943),C=a(68160),Z=a(21933),j=a(46417);const q=Z.Ry().shape({email:p.Z.email((0,t.ag)("user.fields.email")),roles:p.Z.stringArray((0,t.ag)("user.fields.roles"),{required:!0,min:1})}),N=Z.Ry().shape({emails:Z.IX().label((0,t.ag)("user.fields.emails")).of(Z.Z_().transform(((e,n)=>""===n?null:e)).email((0,t.ag)("user.validations.email")).label((0,t.ag)("user.fields.email")).max(255).required()).required().min(1),roles:p.Z.stringArray((0,t.ag)("user.fields.roles"),{required:!0,min:1})});const w=function(e){const{single:n,saveLoading:a}=e,r=e.single?q:N,[i]=(0,l.useState)((()=>({emails:[],email:"",roles:[]}))),o=(0,g.cI)({resolver:(0,c.X)(r),mode:"all",defaultValues:i}),s=n=>{const{...a}=n;a.email&&(a.emails=[a.email],delete a.email),e.onSubmit(null,a)};return(0,j.jsx)(C.Z,{children:(0,j.jsx)(g.RV,{...o,children:(0,j.jsxs)("form",{onSubmit:o.handleSubmit(s),children:[(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:n?(0,j.jsx)(f.Z,{name:"email",label:(0,t.ag)("user.fields.email"),required:!0,autoFocus:!0}):(0,j.jsx)(x.Z,{name:"emails",label:(0,t.ag)("user.fields.emails"),notFoundContent:(0,t.ag)("user.new.emailsHint"),required:!0})}),(0,j.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,j.jsx)(v.Z,{name:"roles",label:(0,t.ag)("user.fields.roles"),required:!0,options:b.Z.roles.map((e=>({value:e,label:(0,t.ag)("roles.".concat(e,".label"))}))),mode:"multiple"})})]}),(0,j.jsxs)("div",{className:"form-buttons",children:[(0,j.jsxs)("button",{className:"btn btn-primary",disabled:a,type:"button",onClick:o.handleSubmit(s),children:[(0,j.jsx)(h.Z,{loading:a,iconClass:"far fa-save"})," ",(0,t.ag)("common.save")]}),(0,j.jsxs)("button",{disabled:a,onClick:()=>{Object.keys(i).forEach((e=>{o.setValue(e,i[e])}))},className:"btn btn-light",type:"button",children:[(0,j.jsx)("i",{className:"fas fa-undo"})," ",(0,t.ag)("common.reset")]}),e.onCancel?(0,j.jsxs)("button",{disabled:a,onClick:()=>e.onCancel(),className:"btn btn-light",type:"button",children:[(0,j.jsx)("i",{className:"fas fa-times"})," ",(0,t.ag)("common.cancel")]}):null]})]})})})};const y=function(e){const n=(0,r.I0)(),a=(0,r.v9)(s.Z.selectSaveLoading);return(0,l.useEffect)((()=>{n(o.Z.doInit())}),[n]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.Z,{items:[[(0,t.ag)("dashboard.menu"),"/"],[(0,t.ag)("user.menu"),"/user"],[(0,t.ag)("user.new.title")]]}),(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(m.Z,{children:(0,t.ag)("user.new.title")}),(0,j.jsx)(w,{saveLoading:a,onSubmit:(e,a)=>{n(o.Z.doAdd(a))},onCancel:()=>(0,i.s1)().push("/user")})]})]})}},11495:(e,n,a)=>{a.d(n,{Z:()=>p});var l=a(87462),r=a(47313),t=a(4194),i=a(36228),o=a(1413),s=a(42982),d=a(44925),u=a(6928),m=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],c=function(){var e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),l=String(n.getOptionValue(e)).toLowerCase(),r=String(n.getOptionLabel(e)).toLowerCase();return l===a||r===a},g={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,n,a,l){return!(!e||n.some((function(n){return c(e,n,l)}))||a.some((function(n){return c(e,n,l)})))},getNewOptionData:function(e,n){return{label:n,value:e,__isNew__:!0}}};a(1168),a(5236);var p=(0,r.forwardRef)((function(e,n){var a=function(e){var n=e.allowCreateWhileLoading,a=void 0!==n&&n,l=e.createOptionPosition,i=void 0===l?"last":l,c=e.formatCreateLabel,p=void 0===c?g.formatCreateLabel:c,b=e.isValidNewOption,h=void 0===b?g.isValidNewOption:b,f=e.getNewOptionData,v=void 0===f?g.getNewOptionData:f,x=e.onCreateOption,C=e.options,Z=void 0===C?[]:C,j=e.onChange,q=(0,d.Z)(e,m),N=q.getOptionValue,w=void 0===N?t.g:N,y=q.getOptionLabel,O=void 0===y?t.b:y,M=q.inputValue,V=q.isLoading,L=q.isMulti,S=q.value,k=q.name,B=(0,r.useMemo)((function(){return h(M,(0,u.H)(S),Z,{getOptionValue:w,getOptionLabel:O})?v(M,p(M)):void 0}),[p,v,O,w,M,h,Z,S]),D=(0,r.useMemo)((function(){return!a&&V||!B?Z:"first"===i?[B].concat((0,s.Z)(Z)):[].concat((0,s.Z)(Z),[B])}),[a,i,V,B,Z]),P=(0,r.useCallback)((function(e,n){if("select-option"!==n.action)return j(e,n);var a=Array.isArray(e)?e:[e];if(a[a.length-1]!==B)j(e,n);else if(x)x(M);else{var l=v(M,M),r={action:"create-option",name:k,option:l};j((0,u.D)(L,[].concat((0,s.Z)((0,u.H)(S)),[l]),l),r)}}),[v,M,L,k,B,x,j,S]);return(0,o.Z)((0,o.Z)({},q),{},{options:D,onChange:P})}((0,i.u)(e));return r.createElement(t.S,(0,l.Z)({ref:n},a))}))},93605:(e,n,a)=>{a.d(n,{ZP:()=>o});var l=a(36228),r=a(87462),t=a(47313),i=a(4194),o=(a(5296),a(1168),a(5236),(0,t.forwardRef)((function(e,n){var a=(0,l.u)(e);return t.createElement(i.S,(0,r.Z)({ref:n},a))})))},87462:(e,n,a)=>{function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},l.apply(this,arguments)}a.d(n,{Z:()=>l})}}]);