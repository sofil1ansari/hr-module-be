(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[9504],{20627:(e,n,l)=>{"use strict";l.d(n,{Z:()=>d});var t=l(35323),a=l(86495),r=l(26319),s=l(71945);const i=(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],((e,n)=>new r.Z(e,n).match(s.Z.values.employeeRead))),o=(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],((e,n)=>new r.Z(e,n).match(s.Z.values.employeeEdit))),m=(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],((e,n)=>new r.Z(e,n).match(s.Z.values.employeeCreate))),u=(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],((e,n)=>new r.Z(e,n).match(s.Z.values.employeeImport))),d={selectPermissionToRead:i,selectPermissionToEdit:o,selectPermissionToCreate:m,selectPermissionToDestroy:(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],((e,n)=>new r.Z(e,n).match(s.Z.values.employeeDestroy))),selectPermissionToImport:u}},89994:(e,n,l)=>{"use strict";l.d(n,{Z:()=>i});var t=l(70816),a=l.n(t),r=l(10499),s=l(21933);const i={generic:e=>s.nK().label(e),string(e,n){n=n||{};let l=s.Z_().transform(((e,n)=>""===n?null:e)).nullable().trim().label(e);return n.required&&(l=l.required()),(n.min||0===n.min)&&(l=l.min(n.min)),n.max&&(l=l.max(n.max)),n.matches&&(l=l.matches(n.matches)),l},boolean:(e,n)=>s.Xg().default(!1).label(e),relationToOne(e,n){n=n||{};let l=s.nK().nullable().label(e).transform(((e,n)=>n?n.id:null));return n.required&&(l=l.required()),l},stringArray(e,n){n=n||{};let l=s.IX().compact().ensure().of(s.Z_().transform(((e,n)=>""===n?null:e)).trim()).label(e);return(n.required||n.min)&&(l=l.required()),n.min||0===n.min?l=l.min(n.min):n.required&&(l=l.min(1)),n.max&&(l=l.max(n.max)),l},relationToMany(e,n){n=n||{};let l=s.IX().nullable().label(e).transform(((e,n)=>n&&n.length?n.map((e=>e.id)):[]));return(n.required||n.min)&&(l=l.required()),n.min||0===n.min?l=l.min(n.min):n.required&&(l=l.min(1)),n.max&&(l=l.max(n.max)),l},integer(e,n){n=n||{};let l=s.Rx().transform(((e,n)=>""===n?null:e)).integer().nullable().label(e);return n.required&&(l=l.required()),(n.min||0===n.min)&&(l=l.min(n.min)),n.max&&(l=l.max(n.max)),l},images(e,n){n=n||{};let l=s.IX().nullable().label(e);return(n.required||n.min)&&(l=l.required()),n.min||0===n.min?l=l.min(n.min):n.required&&(l=l.min(1)),n.max&&(l=l.max(n.max)),l},files(e,n){n=n||{};let l=s.IX().compact().ensure().nullable().label(e);return(n.required||n.min)&&(l=l.required()),n.min||0===n.min?l=l.min(n.min):n.required&&(l=l.min(1)),n.max&&(l=l.max(n.max)),l},enumerator(e,n){n=n||{};let l=s.Z_().transform(((e,n)=>""===n?null:e)).label(e).nullable().oneOf([null,...n.options||[]]);return n.required&&(l=l.required((0,r.ag)("validation.string.selected"))),l},email(e,n){n=n||{};let l=s.Z_().transform(((e,n)=>""===n?null:e)).nullable().trim().label(e).email();return n.required&&(l=l.required()),(n.min||0===n.min)&&(l=l.min(n.min)),n.max&&(l=l.max(n.max)),n.matches&&(l=l.matches(n.matches)),l},decimal(e,n){n=n||{};let l=s.Rx().transform(((e,n)=>""===n?null:e)).nullable().label(e);return n.required&&(l=l.required()),(n.min||0===n.min)&&(l=l.min(n.min)),n.max&&(l=l.max(n.max)),l},datetime(e,n){n=n||{};let l=s.nK().nullable().label(e).transform(((e,n)=>e?a()(n,"YYYY-MM-DD HH:mm").toISOString():null));return n.required&&(l=l.required()),l},date(e,n){n=n||{};let l=s.nK().nullable().label(e).test("is-date",(0,r.ag)("validation.mixed.default"),(e=>!e||a()(e,"YYYY-MM-DD").isValid())).transform((e=>e?a()(e).format("YYYY-MM-DD"):null));return n.required&&(l=l.required()),l}}},1876:(e,n,l)=>{"use strict";l.d(n,{Z:()=>N});var t=l(47313),a=l(75627),r=l(85554),s=l(20627),i=l(91950),o=l(64214),m=l(1168),u=l(10499),d=l(33512),c=l(55722),h=l(46417);const f=e=>{const n=(0,t.useRef)(),l=(0,t.useRef)(),[a,r]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(n.current){const e=new o.u_(n.current);e.show(),l.current=e}}),[]);const s=()=>{l.current&&(l.current.hide(),e.onClose())};return m.createPortal((0,h.jsx)("div",{ref:n,className:"modal",tabIndex:-1,children:(0,h.jsx)("div",{className:"modal-dialog modal-lg",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h5",{className:"modal-title",children:(0,u.ag)("entities.employee.new.title")}),(0,h.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",onClick:s,children:(0,h.jsx)("span",{children:"\xd7"})})]}),(0,h.jsx)("div",{className:"modal-body",children:(0,h.jsx)(c.Z,{saveLoading:a,onSubmit:async(n,t)=>{try{var a;r(!0);const{id:n}=await i.Z.create(t),s=await i.Z.find(n);null===(a=l.current)||void 0===a||a.hide(),e.onSuccess(s)}catch(s){d.Z.handle(s)}finally{r(!1)}},onCancel:s,modal:!0})})]})})}),document.getElementById("modal-root"))};var p=l(35487),b=l.n(p),x=l(93605),g=l(49384);function v(e){const{watch:n,setValue:l,register:r,formState:{touchedFields:s,errors:i,isSubmitted:o}}=(0,a.Gc)(),{label:m,name:d,hint:c,placeholder:f,autoFocus:p,externalErrorMessage:v,mode:Z,required:N,isClearable:y,mapper:j,fetchFn:C}=e,q=n(d),[w,P]=(0,t.useState)([]),[S,k]=(0,t.useState)(!1);(0,t.useEffect)((()=>{r(d)}),[r,d]),(0,t.useEffect)((()=>{(async()=>{k(!0);try{let e=await C();e=e.map((e=>j.toAutocomplete(e))),P(e),k(!1)}catch(e){return console.error(e),P([]),k(!1),[]}})().then((()=>{}))}),[]);const T=e=>(w||[]).find((n=>n.value===e.value))||e,V=()=>"multiple"===Z?M():D(),M=()=>q?q.map((e=>T(j.toAutocomplete(e)))):[],D=()=>q?T(j.toAutocomplete(q)):null,Y=n=>{if(!n)return l(d,[],{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange([]));const t=n.map((e=>j.toValue(e)));l(d,t,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t)},I=n=>{if(!n)return l(d,null,{shouldValidate:!0,shouldDirty:!0}),void(e.onChange&&e.onChange(null));const t=j.toValue(n);l(d,t,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(t)},E=S?(0,u.ag)("autocomplete.loading"):c,R=g.Z.errorMessage(d,i,s,o,v),O=Boolean(R)?{control:e=>({...e,borderColor:"red"})}:void 0;return(0,h.jsxs)("div",{className:"form-group",children:[Boolean(m)&&(0,h.jsx)("label",{className:"col-form-label ".concat(N?"required":null),htmlFor:d,children:m}),(0,h.jsxs)("div",{style:{display:"flex"},children:[(0,h.jsx)(x.ZP,{className:"w-100",styles:O,id:d,name:d,isMulti:"multiple"===Z,placeholder:f||"",autoFocus:p||void 0,onChange:e=>"multiple"===Z?Y(e):I(e),value:V(),isClearable:y,options:(()=>{const{mode:n}=e;return w?V()?"multiple"===n?b()([...w,...V()],"value"):b()([...w,V()],"value"):w:[]})(),onBlur:n=>{e.onBlur&&e.onBlur(n)},loadingMessage:()=>(0,u.ag)("autocomplete.loading"),noOptionsMessage:()=>(0,u.ag)("autocomplete.noOptions")}),e.showCreate&&e.hasPermissionToCreate?(0,h.jsx)("button",{style:{marginLeft:"16px",flexShrink:0},className:"btn btn-primary",type:"button",onClick:e.onOpenModal,children:(0,h.jsx)("i",{className:"fas fa-plus"})}):null]}),(0,h.jsx)("div",{className:"invalid-feedback",children:R}),Boolean(E)&&(0,h.jsx)("small",{className:"form-text text-muted",children:E})]})}v.defaultProps={isClearable:!0,mode:"default",required:!1};const Z=v,N=e=>{const[n,l]=(0,t.useState)(!1),{setValue:o,getValues:m}=(0,a.Gc)(),u=(0,r.v9)(s.Z.selectPermissionToCreate),d=()=>{l(!1)},c={toAutocomplete(e){if(!e)return null;const n=e.id;let l=e.label;return e.email&&(l=e.email),{key:n,value:n,label:l}},toValue:e=>e?{id:e.value,label:e.label}:null};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Z,{...e,fetchFn:(e,n)=>i.Z.listAutocomplete(e,n),mapper:c,onOpenModal:()=>{l(!0)},hasPermissionToCreate:u}),n&&(0,h.jsx)(f,{onClose:d,onSuccess:n=>{const{name:l,mode:t}=e;o(l,t&&"multiple"===t?[...m()[l]||[],n]:n,{shouldValidate:!0,shouldDirty:!0}),d()}})]})}},55722:(e,n,l)=>{"use strict";l.d(n,{Z:()=>f});var t=l(62563),a=l(47313),r=l(75627),s=l(10499),i=l(89994),o=l(95748),m=l(47575),u=l(68160),d=l(21933),c=l(46417);const h=d.Ry().shape({title:i.Z.string((0,s.ag)("entities.title.fields.title"),{}),firstName:i.Z.string((0,s.ag)("entities.firstName.fields.firstName"),{}),lastName:i.Z.string((0,s.ag)("entities.lastName.fields.lastName"),{}),email:i.Z.string((0,s.ag)("entities.email.fields.email"),{}),phoneNumber:i.Z.string((0,s.ag)("entities.phoneNumber.fields.phoneNumber"),{})}),f=e=>{const[n]=(0,a.useState)((()=>{const n=e.record||{};return{title:n.title,firstName:n.firstName,lastName:n.lastName,email:n.email,phoneNumber:n.phoneNumber}})),l=(0,r.cI)({resolver:(0,t.X)(h),mode:"all",defaultValues:n}),i=n=>{var l;e.onSubmit(null===e||void 0===e||null===(l=e.record)||void 0===l?void 0:l.id,n)};return(0,c.jsx)(u.Z,{children:(0,c.jsx)(r.RV,{...l,children:(0,c.jsxs)("form",{onSubmit:l.handleSubmit(i),children:[(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,c.jsx)(m.Z,{name:"title",label:(0,s.ag)("entities.employee.fields.title")})}),(0,c.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,c.jsx)(m.Z,{name:"firstName",label:(0,s.ag)("entities.employee.fields.firstName")})}),(0,c.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,c.jsx)(m.Z,{name:"lastName",label:(0,s.ag)("entities.employee.fields.lastName")})}),(0,c.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,c.jsx)(m.Z,{name:"email",label:(0,s.ag)("entities.employee.fields.email")})}),(0,c.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,c.jsx)(m.Z,{name:"phoneNumber",label:(0,s.ag)("entities.employee.fields.phoneNumber")})})]}),(0,c.jsxs)("div",{className:"form-buttons",children:[(0,c.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:l.handleSubmit(i),children:[(0,c.jsx)(o.Z,{loading:e.saveLoading,iconClass:"far fa-save"})," ",(0,s.ag)("common.save")]}),(0,c.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:()=>{Object.keys(n).forEach((e=>{l.setValue(e,n[e])}))},children:[(0,c.jsx)("i",{className:"fas fa-undo"})," ",(0,s.ag)("common.reset")]}),e.onCancel?(0,c.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:()=>e.onCancel(),children:[(0,c.jsx)("i",{className:"fas fa-times"})," ",(0,s.ag)("common.cancel")]}):null]})]})})})}},68160:(e,n,l)=>{"use strict";l.d(n,{Z:()=>r});var t,a=l(30168);const r=l(20346).ZP.div(t||(t=(0,a.Z)(["\n  padding-top: 0;\n  padding-bottom: 0;\n\n  label.required::before {\n    display: inline-block;\n    margin-right: 4px;\n    content: '*';\n    line-height: 1;\n    font-size: 13px;\n    color: #f5222d;\n  }\n\n  .react-datepicker-wrapper {\n    width: 100%;\n  }\n\n  .custom-control {\n    z-index: 0;\n  }\n\n  .invalid-feedback {\n    display: block;\n  }\n\n  .form-buttons {\n    padding-top: 16px;\n\n    .btn {\n      margin-right: 8px;\n      margin-bottom: 8px;\n    }\n  }\n"])))},34405:(e,n,l)=>{var t=l(99038);e.exports=function(e,n){return!!(null==e?0:e.length)&&t(e,n,0)>-1}},86722:e=>{e.exports=function(e,n,l){for(var t=-1,a=null==e?0:e.length;++t<a;)if(l(n,e[t]))return!0;return!1}},93527:e=>{e.exports=function(e,n,l,t){for(var a=e.length,r=l+(t?1:-1);t?r--:++r<a;)if(n(e[r],r,e))return r;return-1}},99038:(e,n,l)=>{var t=l(93527),a=l(57700),r=l(13245);e.exports=function(e,n,l){return n===n?r(e,n,l):t(e,a,l)}},57700:e=>{e.exports=function(e){return e!==e}},7579:(e,n,l)=>{var t=l(44526),a=l(34405),r=l(86722),s=l(88905),i=l(56946),o=l(73671);e.exports=function(e,n,l){var m=-1,u=a,d=e.length,c=!0,h=[],f=h;if(l)c=!1,u=r;else if(d>=200){var p=n?null:i(e);if(p)return o(p);c=!1,u=s,f=new t}else f=n?[]:h;e:for(;++m<d;){var b=e[m],x=n?n(b):b;if(b=l||0!==b?b:0,c&&x===x){for(var g=f.length;g--;)if(f[g]===x)continue e;n&&f.push(x),h.push(b)}else u(f,x,l)||(f!==h&&f.push(x),h.push(b))}return h}},56946:(e,n,l)=>{var t=l(4199),a=l(8568),r=l(73671),s=t&&1/r(new t([,-0]))[1]==1/0?function(e){return new t(e)}:a;e.exports=s},13245:e=>{e.exports=function(e,n,l){for(var t=l-1,a=e.length;++t<a;)if(e[t]===n)return t;return-1}},8568:e=>{e.exports=function(){}},35487:(e,n,l)=>{var t=l(81186),a=l(7579);e.exports=function(e,n){return e&&e.length?a(e,t(n,2)):[]}},93605:(e,n,l)=>{"use strict";l.d(n,{ZP:()=>i});var t=l(36228),a=l(87462),r=l(47313),s=l(4194),i=(l(5296),l(1168),l(5236),(0,r.forwardRef)((function(e,n){var l=(0,t.u)(e);return r.createElement(s.S,(0,a.Z)({ref:n},l))})))},72632:()=>{}}]);