"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[6023],{86023:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var l=s(10499),t=s(48704),r=s(62563),n=s(47313),o=s(75627),i=s(85554),c=s(926),m=s(86495),d=s(89994),u=s(96111),h=s(95748),f=s(85543),p=s(47575),x=s(68160),N=s(21933),b=s(46417);const g=N.Ry().shape({firstName:d.Z.string((0,l.ag)("user.fields.firstName"),{max:80}),lastName:d.Z.string((0,l.ag)("user.fields.lastName"),{max:175}),phoneNumber:d.Z.string((0,l.ag)("user.fields.phoneNumber"),{matches:/^[0-9]/,max:24}),avatars:d.Z.images((0,l.ag)("user.fields.avatars"),{max:1})});const j=function(e){const a=(0,i.I0)(),s=(0,i.v9)(m.Z.selectLoadingUpdateProfile),t=(0,i.v9)(m.Z.selectCurrentUser),[d]=(0,n.useState)((()=>{const e=t||{};return{firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNumber,avatars:e.avatars||[]}})),N=(0,o.cI)({resolver:(0,r.X)(g),mode:"all",defaultValues:d}),j=e=>{a(c.Z.doUpdateProfile(e))};return(0,b.jsx)(x.Z,{children:(0,b.jsx)(o.RV,{...N,children:(0,b.jsxs)("form",{onSubmit:N.handleSubmit(j),children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"col-form-label",htmlFor:"email",children:(0,l.ag)("user.fields.email")}),(0,b.jsx)("input",{type:"text",readOnly:!0,className:"form-control-plaintext",id:"email",name:"email",value:t.email})]})}),(0,b.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,b.jsx)(p.Z,{name:"firstName",label:(0,l.ag)("user.fields.firstName"),autoComplete:"firstName",autoFocus:!0})}),(0,b.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,b.jsx)(p.Z,{name:"lastName",label:(0,l.ag)("user.fields.lastName"),autoComplete:"lastName"})}),(0,b.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,b.jsx)(p.Z,{name:"phoneNumber",label:(0,l.ag)("user.fields.phoneNumber"),autoComplete:"phoneNumber",prefix:"+"})}),(0,b.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,b.jsx)(f.Z,{name:"avatars",label:(0,l.ag)("user.fields.avatars"),storage:u.Z.values.userAvatarsProfiles,max:1})})]}),(0,b.jsxs)("div",{className:"form-buttons",children:[(0,b.jsxs)("button",{className:"btn btn-primary",disabled:s,type:"button",onClick:N.handleSubmit(j),children:[(0,b.jsx)(h.Z,{loading:s,iconClass:"far fa-save"})," ",(0,l.ag)("common.save")]}),(0,b.jsxs)("button",{disabled:s,onClick:()=>{Object.keys(d).forEach((e=>N.setValue(e,d[e])))},className:"btn btn-light",type:"button",children:[(0,b.jsx)("i",{className:"fas fa-undo"})," ",(0,l.ag)("common.reset")]}),e.onCancel?(0,b.jsxs)("button",{disabled:s,onClick:()=>e.onCancel(),className:"btn btn-light",type:"button",children:[(0,b.jsx)("i",{className:"fas fa-times"})," ",(0,l.ag)("common.cancel")]}):null]})]})})})};var v=s(27829),Z=s(53852),C=s(75352);const y=function(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Z.Z,{items:[[(0,l.ag)("dashboard.menu"),"/"],[(0,l.ag)("auth.profile.title")]]}),(0,b.jsxs)(v.Z,{children:[(0,b.jsx)(C.Z,{children:(0,l.ag)("auth.profile.title")}),(0,b.jsx)(j,{onCancel:()=>(0,t.s1)().push("/")})]})]})}},47575:(e,a,s)=>{s.d(a,{Z:()=>i});var l=s(47313),t=s(75627),r=s(49384),n=s(46417);function o(e){const{label:a,name:s,hint:o,type:i,placeholder:c,autoFocus:m,autoComplete:d,required:u,externalErrorMessage:h,disabled:f,endAdornment:p}=e,{setValue:x,watch:N,register:b,formState:{touchedFields:g,isSubmitted:j,errors:v}}=(0,t.Gc)(),Z=r.Z.errorMessage(s,v,g,j,h);return(0,l.useEffect)((()=>{b(s)}),[b,s]),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("div",{className:p?"input-group":"",children:[Boolean(a)&&(0,n.jsx)("label",{className:"col-form-label ".concat(u?"required":null),htmlFor:s,children:a}),(0,n.jsx)("input",{id:s,name:s,type:i,value:N(s),onChange:a=>{x(s,a.target.value,{shouldValidate:!0,shouldDirty:!0}),e.onChange&&e.onChange(a.target.value)},onBlur:a=>{e.onBlur&&e.onBlur(a)},placeholder:c||void 0,autoFocus:m||void 0,autoComplete:d||void 0,disabled:f,className:"form-control ".concat(Z?"is-invalid":"")}),p&&(0,n.jsx)("div",{className:"input-group-append",children:(0,n.jsx)("span",{className:"input-group-text",children:p})})]}),(0,n.jsx)("div",{className:"invalid-feedback",children:Z}),Boolean(o)&&(0,n.jsx)("small",{className:"form-text text-muted",children:o})]})}o.defaultProps={type:"text",required:!1};const i=o}}]);